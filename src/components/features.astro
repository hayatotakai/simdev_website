---
---

    <!-- CAROUSEL -->
    <section class="carousel">
      <div class="slides">
        <div class="slide active">
          <div class="video-wrapper">
                      <!-- <video src="https://pub-fa810e0d43204e26baa3ea906dc3c529.r2.dev/coalesce.mp4" autoplay loop muted ></video> -->
          </div>
        </div>

        <div class="slide">
          <div class="video-wrapper">
            <!-- <video src={videoAirx2.src} autoplay muted loop></video> -->
          </div>
        </div>

        <div class="slide">
          <div class="video-wrapper">
            <!-- <video src={videoAirx2.src} autoplay muted loop></video> -->
          </div>
        </div>

        <div class="slide">
          <div class="video-wrapper">
            <!-- <video src={videoAirx2.src} autoplay muted loop></video> -->
          </div>
        </div>

        <div class="slide">
          <div class="video-wrapper">
            <!-- <video src={videoAirx2.src} autoplay muted loop></video> -->
          </div>
        </div>

        <div class="slide">
          <div class="video-wrapper">
            <!-- <video src={videoAirx2.src} autoplay muted loop></video> -->
          </div>
        </div>
      </div>

      <div class="nav-buttons">
        <div class="nav-btn active" data-index="0">
          <div class="title">Bubble Coalescing</div>
          <div class="desc">
            Our filters use a specially designed screen that coalesces small air
            bubbles into larger ones for faster deaeration.
          </div>
        </div>

        <div class="nav-btn" data-index="1">
          <div class="title">Low Turbulence</div>
          <div class="desc">
            The large surface area slows oil entry into the tank, reducing
            turbulence and bubble formation for smooth operation.
          </div>
        </div>

        <div class="nav-btn" data-index="2">
          <div class="title">Sizes</div>
          <div class="desc">
            Air-X filters come in multiple sizes to suit a wide range of flow
            rates.
          </div>
        </div>

        <div class="nav-btn" data-index="3">
          <div class="title">Compatibility</div>
          <div class="desc">
            Supports top, bottom, or side mounting for flexible tank layouts.
          </div>
        </div>

        <div class="nav-btn" data-index="4">
          <div class="title">Durability</div>
          <div class="desc">
            Engineered for reliability, pressure-tested through FEA and
            real-world lab testing.
          </div>
        </div>

        <div class="nav-btn" data-index="5">
          <div class="title">Sensors</div>
          <div class="desc">
            Optional pressure sensors enable real-time condition monitoring.
          </div>
        </div>
      </div>

      <div class="arrows">
        <div class="arrow left">&#10094;</div>
        <div class="arrow right">&#10095;</div>
      </div>
    </section>

    <style>
           .carousel {
            position: relative;
            width: 70vw;
            max-width: 1500px;
            margin: 100px auto 100px auto;
            aspect-ratio: 16 / 9;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        .slides {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transform: translateX(0);
            transition: transform 0.5s ease, opacity 0.5s ease;
        }

        .slide.active {
            opacity: 1;
            z-index: 1;
        }

        .slide.exit-left {
            transform: translateX(-30%);
            opacity: 0;
            z-index: 0;
        }

        .slide.enter-right {
            transform: translateX(10%);
            opacity: 0;
            z-index: 0;
        }

        /* Wrapper for rounded corners */
        .video-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 20px;
        }

        .video-wrapper video {
            width: 100%;
  aspect-ratio: 16/9;
            object-fit: cover;
        }

        /* Left vignette overlay */
/* Left vignette overlay */
.video-wrapper::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(to right, rgba(0,0,0,0.9), transparent);
  pointer-events: none;
  z-index: 2;
}

        /* Buttons container â€” vertically aligned left */
        .nav-buttons {
            position: absolute;
            top: 40px;
            left: 30px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: flex-start;
            justify-content: flex-end;
            z-index: 2;
        }

        /* Buttons */
        .nav-btn {
            position: relative;
            backdrop-filter: blur(8px);
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            color: white;
            cursor: pointer;
            overflow: hidden;
            text-align: left;
            padding: 6px 14px;
            font-size: 1.2rem;
            width: 220px;
            transition: width 0.5s ease, height 0.5s ease, background 0.5s ease, border-color 0.5s ease;
            box-sizing: border-box;
            height: 50px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .nav-btn .title {
            margin-top: 6px;
        }

        .nav-btn .desc {
            opacity: 0;
            transition: opacity 0.4s ease;
            font-size: 1.1rem;
            margin-top: 4px;
            transform: translateY(5px);
            pointer-events: none;
        }

        /* Active button expands upward */
        .nav-btn.active {
            width: 420px;
            background: rgba(211, 211, 211, 0.5);
            border-color: rgba(255, 255, 255, 0.8);
            transform-origin: bottom left;
        }

        /* Arrows */
        .arrows {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 2;
        }

        .arrow {
            font-size: 1.2rem;
            color: white;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background 0.3s ease;
            user-select: none;
            border: 1px solid rgba(255, 255, 255, 0.7);
        }

        .arrow:hover {
            background: rgba(255, 255, 255, 0.4);
        }

    </style>
    <script>
     const slides = document.querySelectorAll('.slide');
        const sidebuttons = document.querySelectorAll('.nav-btn');
        const leftArrow = document.querySelector('.arrow.left');
        const rightArrow = document.querySelector('.arrow.right');

        let index = 0;
        let animating = false;

        const slideDelay = 500;
        const slideDuration = 700;
        const expandDuration = 500;
        const inactiveHeight = 50;
        const expandedWidth = 420;

        function measureExpandedHeight(btn) {
            const clone = btn.cloneNode(true);
            clone.style.width = expandedWidth + 'px';
            clone.style.position = 'absolute';
            clone.style.visibility = 'hidden';
            clone.style.pointerEvents = 'none';
            clone.style.height = 'auto';
            clone.style.transition = 'none';
            document.body.appendChild(clone);
            const height = clone.scrollHeight + 6;
            clone.remove();
            return height;
        }

        function adjustButtonHeight() {
            sidebuttons.forEach(btn => {
                const desc = btn.querySelector('.desc');
                if (btn.classList.contains('active')) {
                    const fullHeight = measureExpandedHeight(btn);
                    btn.style.height = fullHeight + 'px';
                } else {
                    btn.style.height = inactiveHeight + 'px';
                    desc.style.opacity = 0;
                }
            });
        }

        function showSlide(newIndex) {
            if (animating || newIndex === index) return;
            animating = true;

            const currentSlide = slides[index];
            const nextSlide = slides[newIndex];
            const currentVideo = currentSlide.querySelector('video');
            const nextVideo = nextSlide.querySelector('video');

            // Stop and reset current video
            currentVideo.pause();
            currentVideo.currentTime = 0;

            currentSlide.classList.add('exit-left');
            currentSlide.classList.remove('active');

            setTimeout(() => {
                currentSlide.classList.remove('exit-left');
                nextSlide.classList.add('enter-right');
                nextSlide.style.transition = 'none';
                nextSlide.classList.add('active');
                void nextSlide.offsetWidth;
                nextSlide.style.transition = '';
                nextSlide.classList.remove('enter-right');

                // Restart next video
                nextVideo.currentTime = 0;
                nextVideo.play();

                setTimeout(() => {
                    index = newIndex;
                    animating = false;
                }, slideDuration);
            }, slideDelay);

            sidebuttons.forEach((btn, i) => {
                const desc = btn.querySelector('.desc');
                btn.classList.toggle('active', i === newIndex);
                if (i !== newIndex) desc.style.opacity = 0;
            });

            adjustButtonHeight();

  const activeDesc = sidebuttons[newIndex].querySelector('.desc');
  setTimeout(() => {
    activeDesc.style.opacity = 0.9;
  }, expandDuration);
        }

        sidebuttons.forEach(btn => btn.addEventListener('click', () => showSlide(parseInt(btn.dataset.index))));
        leftArrow.addEventListener('click', () => showSlide((index - 1 + slides.length) % slides.length));
        rightArrow.addEventListener('click', () => showSlide((index + 1) % slides.length));

        window.addEventListener('load', () => {
            sidebuttons.forEach(btn => btn.classList.remove('active'));
            slides.forEach(slide => slide.classList.remove('active'));
            sidebuttons[0].classList.add('active');
            slides[0].classList.add('active');
            const firstDesc = sidebuttons[0].querySelector('.desc');
            firstDesc.style.opacity = 0.9;
            requestAnimationFrame(() => setTimeout(adjustButtonHeight, 150));
        });

        window.addEventListener('resize', adjustButtonHeight);
    </script>